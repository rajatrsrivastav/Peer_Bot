name: GitHub Runner VM Info

on:
  workflow_dispatch:
  push:
    branches:
      - main

jobs:
  vm-info:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4

      - name: Show Public IP
        run: |
          echo "Public IP:"
          curl -s https://api.ipify.org
          echo -e "\n"

      - name: Show IP Geolocation Info
        run: |
          echo "IP Geolocation Info:"
          curl -s https://ipinfo.io
          echo -e "\n"

      - name: Show OS Information
        run: |
          echo "OS Information:"
          uname -a
          lsb_release -a || cat /etc/os-release
          echo -e "\n"

      - name: Show CPU Information
        run: |
          echo "CPU Information:"
          lscpu
          echo -e "\n"

      - name: Show Memory Information
        run: |
          echo "Memory Information:"
          free -h
          echo -e "\n"

      - name: Show Disk Information
        run: |
          echo "Disk Information:"
          df -h
          echo -e "\n"

      - name: Show Environment Variables
        run: |
          echo "Environment Variables:"
          printenv | sort
